<Window x:Class="DockTop.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ctrls="clr-namespace:DockTop.Controls"
        Title="DockTop"
        WindowStartupLocation="Manual"
        Width="{Binding DockWidth, RelativeSource={RelativeSource Self}}"
        Height="{Binding DockHeight, RelativeSource={RelativeSource Self}}"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="{Binding Settings.Current.Topmost}"
        ShowInTaskbar="False"
        ResizeMode="NoResize"
        Loaded="Window_Loaded"
        MouseLeftButtonDown="Window_MouseLeftButtonDown">
  <Grid>
    <Border CornerRadius="{Binding Settings.Current.CornerRadius}"
            Background="{DynamicResource DockBackground}"
            BorderBrush="{DynamicResource DockRing}"
            BorderThickness="1.2">
      <Border.Effect>
        <DropShadowEffect BlurRadius="32" ShadowDepth="0"
                          Opacity="{Binding Settings.Current.GlowOpacity}"
                          Color="#AAFFFFFF"/>
      </Border.Effect>
      <DockPanel LastChildFill="True" Margin="6">
        <StackPanel x:Name="PART_PageDots" DockPanel.Dock="Bottom"
                    Orientation="Horizontal" HorizontalAlignment="Center"
                    Margin="0,6,0,0" />
        <StackPanel Orientation="Horizontal" DockPanel.Dock="Left" VerticalAlignment="Center">
          <Button x:Name="BtnSettings" Content="⚙" Width="28" Height="28" Margin="0,0,6,0"
                  Click="BtnSettings_Click" ToolTip="Settings"/>
        </StackPanel>
        <StackPanel Orientation="Horizontal" DockPanel.Dock="Right" VerticalAlignment="Center">
          <ctrls:NowPlayingTile Width="200" Height="32" Margin="0,0,6,0"/>
          <Button x:Name="BtnSearch" Content="⌕" Width="28" Height="28" Margin="0,0,6,0"
                  Click="BtnSearch_Click" ToolTip="Quick Search (Ctrl+K)"/>
          <Button x:Name="BtnClose" Content="×" Width="28" Height="28"
                  Click="BtnClose_Click" ToolTip="Close"/>
        </StackPanel>
        <ListBox x:Name="TileList" AllowDrop="True" SelectionMode="Single"
                 ItemsSource="{Binding DisplayItems}" Margin="8,2"
                 Background="Transparent" BorderThickness="0">
          <ListBox.ItemsPanel>
            <ItemsPanelTemplate><StackPanel Orientation="Horizontal"/></ItemsPanelTemplate>
          </ListBox.ItemsPanel>
          <ListBox.ItemTemplate>
            <DataTemplate>
              <Button Click="DockItem_Click" Padding="8" Margin="4,0,4,0" MinWidth="64"
                      HorizontalAlignment="Center" VerticalAlignment="Center"
                      Background="{x:Null}" BorderThickness="0">
                <StackPanel>
                  <Image Width="24" Height="24" Margin="0,2,0,2"/>
                  <TextBlock Text="{Binding Title}" HorizontalAlignment="Center"
                             TextTrimming="CharacterEllipsis"/>
                </StackPanel>
              </Button>
            </DataTemplate>
          </ListBox.ItemTemplate>
        </ListBox>
      </DockPanel>
    </Border>
  </Grid>
</Window>
