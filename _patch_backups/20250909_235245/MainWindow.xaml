<Window x:Class="DockTop.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ctrls="clr-namespace:DockTop.Controls"
        Title="DockTop"
        WindowStartupLocation="Manual"
        Width="{Binding DockWidth, RelativeSource={RelativeSource Self}}"
        Height="{Binding DockHeight, RelativeSource={RelativeSource Self}}"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="{Binding Settings.Current.Topmost}"
        ShowInTaskbar="False"
        ResizeMode="NoResize"
        Loaded="Window_Loaded"
        MouseLeftButtonDown="Window_MouseLeftButtonDown">

  <Grid>
    <Border CornerRadius="{Binding Settings.Current.CornerRadius}"
            Background="{DynamicResource DockBackground}"
            BorderBrush="{DynamicResource DockRing}"
            BorderThickness="1.2">
      <Border.Effect>
        <DropShadowEffect BlurRadius="32" ShadowDepth="0"
                          Opacity="{Binding Settings.Current.GlowOpacity}"
                          Color="#AAFFFFFF"/>
      </Border.Effect>

      <DockPanel LastChildFill="True" Margin="6">
        <!-- Left -->
        <StackPanel Orientation="Horizontal" DockPanel.Dock="Left" VerticalAlignment="Center">
          <Button x:Name="BtnSettings" Content="⚙" Width="28" Height="28" Margin="0,0,6,0"
                  Click="BtnSettings_Click" ToolTip="Settings"/>
        </StackPanel>

        <!-- Center: items -->
        <ItemsControl x:Name="ItemsHost" ItemsSource="{Binding DisplayItems}" Margin="8,2">
          <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
              <StackPanel Orientation="Horizontal"/>
            </ItemsPanelTemplate>
          </ItemsControl.ItemsPanel>
          <ItemsControl.ItemTemplate>
            <DataTemplate>
              <Button Click="DockItem_Click" Padding="8" Margin="4,0,4,0" MinWidth="64"
                      HorizontalAlignment="Center" VerticalAlignment="Center">
                <StackPanel>
                  <TextBlock Text="{Binding Title}" HorizontalAlignment="Center"
                             TextTrimming="CharacterEllipsis"/>
                </StackPanel>
              </Button>
            </DataTemplate>
          </ItemsControl.ItemTemplate>
        </ItemsControl>

        <!-- Right -->
        <StackPanel Orientation="Horizontal" DockPanel.Dock="Right" VerticalAlignment="Center">
          <ctrls:NowPlayingTile Width="200" Height="32" Margin="0,0,6,0"/>
          <Button x:Name="BtnSearch" Content="⌕" Width="28" Height="28" Margin="0,0,6,0"
                  Click="BtnSearch_Click" ToolTip="Quick Search (Ctrl+K)"/>
          <Button x:Name="BtnClose" Content="×" Width="28" Height="28"
                  Click="BtnClose_Click" ToolTip="Close"/>
        </StackPanel>
      </DockPanel>
    </Border>
  </Grid>
</Window>
